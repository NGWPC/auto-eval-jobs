id: make-agreement
description: Creates a binary agreement map showing where input datasets (raster/vector) spatially concur in EPSG:5070
arguments:
  targetResolution:
    title: Rasterization Resolution
    description: Required when inputs include vector data (meters)
    schema:
      type: object
      properties:
        x:
          type: number
          minimum: 0.1
          exclusiveMinimum: true
        y: 
          type: number
          minimum: 0.1
          exclusiveMinimum: true
      required: [x, y]
inputs:
  dataset1:
    title: First Dataset
    description: Vector polygon or raster dataset in EPSG:5070
    schema:
      oneOf:
        - type: string
          format: uri
          contentMediaType: image/tiff; application=geotiff
          parameters:
            crs: 
              const: EPSG:5070
        - type: string
          format: uri
          contentMediaType: application/geopackage+gpkg
          parameters: 
            geometry_type: polygon
            crs:
              const: EPSG:5070
  dataset2:
    title: Second Dataset
    description: Vector polygon or raster dataset in EPSG:5070
    schema:
      $ref: '#/inputs/dataset1/schema'
outputs:
  agreementMap:
    title: Agreement Map
    description: Binary raster (1=agreement, 0=disagreement) in CONUS Albers (EPSG:5070)
    schema:
      type: string
      format: uri
      contentMediaType: image/tiff; application=geotiff
    parameters:
      compression: lzw
      dtype: uint8
      no 255
      crs: 
        const: EPSG:5070
        description: Albers Equal Area Continental US projection
